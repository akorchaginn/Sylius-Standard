{% import "@SyliusShop/Common/Macro/money.html.twig" as money %}

{% set product = item.product %}
{% set product_variant = item.variant %}
{% set price = product_variant|sylius_calculate_price({'channel': sylius.channel}) %}
{% set inputField = form_widget(form.quantity) %}

<div class="basket__container-product">
    {% include '@SyliusShop/Product/_info.html.twig' with {'variant': product_variant} %}
    <div>
        {#    {% if item.discountedUnitPrice != price %}#}
        <p class="basket__price">Цена: <span class="basket__price_accent">{{- money.convertAndFormat(price) -}}</span>
        </p>
        {#    {% endif %}#}
        <p class="basket__price-item">{{ money.convertAndFormat(item.discountedUnitPrice) }}</p>
    </div>
    {#    <div>#}
    {#        <p class="basket__price">Цена: <span class="basket__price_accent"> от 180 &#8381;</span></p>#}
    {#        <p class="basket__price-item">190 &#8381;</p>#}
    {#    </div>#}
    <div class="basket__buttons">
        <button class="color__button" type="button">-</button>
        <span class="color__input-price">{{ inputField|raw }}</span>
        <button class="color__button" type="button">+</button>
    </div>
    {#    <p class="basket__price-item basket__price-total">950 &#8381;</p>#}
    {#    <button class="basket__delete-button"></button>#}
    {#</div>#}
    <p class="basket__price-item basket__price-total">{{ money.convertAndFormat(item.subtotal) }}</p>
    <button type="button" data-redirect="{{ path('sylius_shop_cart_summary') }}"
            data-url="{{ path('sylius_shop_ajax_cart_item_remove', {'id': item.id}) }}"
            class="basket__delete-button sylius-cart-remove-button"
            data-csrf-token="{{ csrf_token(item.id) }}"></button>
</div>
{#<tr>#}
{#    <td class="single line">#}
{#        {% include '@SyliusShop/Product/_info.html.twig' with {'variant': product_variant} %}#}
{#    </td>#}
{#    <td class="">#}
{#        {% if item.discountedUnitPrice != price %}#}
{#            <s class="old-price"><span class="sylius-regular-unit-price">{{- money.convertAndFormat(price) -}}</span></s>#}
{#        {% endif %}#}
{#        <span class="sylius-unit-price new-price">{{ money.convertAndFormat(item.discountedUnitPrice) }}</span>#}
{#    </td>#}


{#    <td class="center aligned">#}
{#        <span class="sylius-quantity">{{ form_widget(form.quantity) }}</span>#}
{#    </td>#}

{#    <td class="center aligned">#}
{#        <button type="button" data-redirect="{{ path('sylius_shop_cart_summary') }}" data-url="{{ path('sylius_shop_ajax_cart_item_remove', {'id': item.id}) }}" class="ui circular icon button sylius-cart-remove-button" data-csrf-token="{{ csrf_token(item.id) }}"><i class="remove icon"></i></button>#}
{#    </td>#}
{#    <td class="right aligned">#}
{#        <span class="sylius-total">{{ money.convertAndFormat(item.subtotal) }}</span>#}
{#    </td>#}
{#</tr>#}

<div class="basket__title-mobile">
    <p class="basket__delete-mobile basket__delete delete__button"> Удалить всё</p>
</div>
<figure class="basket__container-mobile">
    <p class="">1.</p>
    {% include '@SyliusShop/Product/_mainImage.html.twig' with {'product': product,  'custom_class': 'basket__image'} %}
    <div>
        {% if item.discountedUnitPrice != price %}
            <p class="basket__price">Цена:
                <span class="basket__price_accent">{{- money.convertAndFormat(price) -}}</span></p>
        {% endif %}
        <p class="basket__price-item">{{ money.convertAndFormat(item.discountedUnitPrice) }}</p>
        {% include '@SyliusShop/Product/_infoMobile.html.twig' with {'variant': product_variant} %}
    </div>
    <button type="button" data-redirect="{{ path('sylius_shop_cart_summary') }}"
            data-url="{{ path('sylius_shop_ajax_cart_item_remove', {'id': item.id}) }}"
            class="basket__delete-button sylius-cart-remove-button"
            data-csrf-token="{{ csrf_token(item.id) }}"></button>
    <div></div>
    <div class="basket__buttons">
        <button class="color__button color__button-basket" type="button">-</button>
        <span class="color__input-price">{{ inputField|raw }}</span>
        <button class="color__button color__button-basket" type="button">+</button>
    </div>
    <p class="basket__price-item basket__price-total">{{ money.convertAndFormat(item.subtotal) }}</p>
</figure>

