{% if product.imagesByType('main') is not empty %}
    {% set source_path = product.imagesByType('main').first.path %}
    {% set original_path = source_path|imagine_filter('sylius_shop_product_original') %}
    {% set path = source_path|imagine_filter(filter|default('sylius_shop_product_large_thumbnail')) %}
{% elseif product.images.first %}
    {% set source_path = product.images.first.path %}
    {% set original_path = source_path|imagine_filter('sylius_shop_product_original') %}
    {% set path = source_path|imagine_filter(filter|default('sylius_shop_product_large_thumbnail')) %}
{% else %}
    {% set original_path = 'http://placehold.it/375x375' %}
    {% set path = original_path %}
{% endif %}

{#<div data-product-image="{{ path }}" data-product-link="{{ original_path }}"></div>#}
<a href="{{ original_path }}" data-lightbox="sylius-product-image">
    <img src="{{ path }}" id="main-image" alt="" class="card__img" data-product-image="{{ path }}"
         data-product-link="{{ original_path }}"/>
</a>
{% if product.imagesByType('main')|length > 1 %}
    {#<div class="ui divider"></div>#}

    {#{{ sonata_block_render_event('sylius.shop.product.show.before_thumbnails', {'product': product}) }}#}

    {#<div class="ui small images">#}
    {% for image in product.imagesByType('main') %}
        {% set path = image.path is not null ? image.path|imagine_filter('sylius_shop_product_small_thumbnail') : 'http://placehold.it/119x119' %}

        {#    <div class="ui image">#}
        {#    {% if product.isConfigurable() and product.variants|length > 0 %}#}
        {#        {% include '@SyliusShop/Product/Show/_imageVariants.html.twig' %}#}
        {#    {% endif %}#}
        <a href="{{ image.path|imagine_filter('sylius_shop_product_original') }}" data-lightbox="sylius-product-image"
           class="card__img-link">
            <img src="{{ path }}"
                 data-large-thumbnail="{{ image.path|imagine_filter('sylius_shop_product_large_thumbnail') }}"
                 class="card__img-small"/>
        </a>
        {#    </div>#}
    {% endfor %}
{% endif %}
